#!/bin/bash
#SBATCH --job-name=deepseek_smoke
#SBATCH --chdir=$HOME/Thesis-LLM-CLD          # CD into project dir
#SBATCH --output=logs/deepseek_%j.out         # combined stdout+stderr
#SBATCH --error=logs/deepseek_%j.err          # or split if you prefer
#SBATCH --time=48:00:00
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=16G
#SBATCH --gres=gpu:1
#SBATCH --partition=gpu_h100
#SBATCH --mail-user=gijs.schouten@student.uva.nl
#SBATCH --mail-type=ALL

# — make sure logs dir exists —
mkdir -p logs

# — debugging on —
set -euxo pipefail

# — load your Python environment —
module purge
module load 2024
module load Anaconda3/2024.06-1

# — activate your conda env from within the project —
conda activate ./thesis_env

# — sanity check —
which python
python --version
ls -la .
ls -la ./thesis_env

# — export your API key from the .env file —
#    (ensure .env lives in $HOME/Thesis-LLM-CLD and is git-ignored)
export $(grep -v '^#' .env | xargs)

# — finally, run the script —
python deepseek-r1-0528_reasoning.py

